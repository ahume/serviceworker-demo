# TODO

- go to network, then go to cache
- forwardTo
- Cache should store promises for SameOriginResponses
    - does it already?!
- CrossOriginResponse
- AsyncMap... isn't async.
- Relative/absolute URLs
    - relative to serviceworker... but where's the worker?
- x-origin stuff?
- load worker from requested page!
- replacement

# Issues

- No HTTPS
- error handling is generally inconsistent and shoddy

# Install/activate flow

new worker detected
    reload
    not different?
        return
    setup (new)
    install (new)
    save new as next

new request
    if next is waiting
        activate (current, next)
            activate (next)
            set next as current
            then
                resolve
    otherwise
        resolve
    then
        push request through worker