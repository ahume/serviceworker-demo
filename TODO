# TODO

- forwardTo
- CrossOriginResponse
    - x-origin stuff?
    - Pick up all requests, not just same-domain
- postMessage
- AsyncMap... isn't async. Should return promises.
- Relative/absolute URLs
    - relative to serviceworker... but where's the worker?
- URL type
- load worker from requested page!
- replacement
- importScript

# Issues

- No HTTPS
- error handling is generally inconsistent and shoddy
- can go to network twice

# Install/activate flow

new worker detected
    reload
    not different?
        return
    setup (new)
    install (new)
    save new as next

new request
    if next is waiting
        activate (current, next)
            activate (next)
            set next as current
            then
                resolve
    otherwise
        resolve
    then
        push request through worker